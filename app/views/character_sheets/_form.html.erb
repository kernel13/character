<%= form_for [@character_sheet] do |f| -%>
 	<% if @character_sheet.errors.any? %>
   	  <div id="error_explanation">
	      <h2><%= pluralize(@character_sheet.errors.count, "error") %> prohibited this character_sheet from being saved:</h2>

	      <ul>
	      <% @character_sheet.errors.full_messages.each do |msg| %>
	        <li><%= msg %></li>
	      <% end %>
	      </ul>
	  </div>
  	<% end %>

    <%= f.submit "Save" %>
 	<div id="sheet">
		<fieldset id="CharacterSheetHeader">
  			  <!-------------------------------------------------------------------------------->
			  <!--							GENERAL INFORMATION								-->
			  <!-------------------------------------------------------------------------------->
		      
		      <%= image_tag 'title.png' %>

		      <!-- Character name -->
		      <div class="CharacterInformation">	
				  <%= f.text_field :name, :id => 'txtCharacterName'  -%><br />
				  <%= f.label :name, t('character_sheet.name') -%>
		      </div>

		      <!-- Classe and level -->
		      <div class="CharacterInformation">
		          <input name="txtClass" type="text" id="txtClass" /> <br  />
		          <label id="lblClasse">Classe et niveau</label>
		      </div>

		      <br class="Clear" />

		      <!-- Race du personnage -->
		      <div class="CharacterInformation">
				  <%= f.text_field :race  -%><br />
				  <%= f.label :race, t('character_sheet.race') -%> 
		      </div>

		      <!-- Alignement -->
		      <div class="CharacterInformation">
		          <%= f.text_field :alignment  -%><br />
				  <%= f.label :alignment, t('character_sheet.alignment') -%>
		      </div>

		      <!-- Deity -->
		      <div class="CharacterInformation">    
		          <%= f.text_field :deity  -%><br />
				  <%= f.label :deity, t('character_sheet.deity') -%>
		      </div>

		      <!-- Sex -->
		      <div class="CharacterInformation">
		         <%= f.text_field :gender  -%><br />
				  <%= f.label :gender, t('character_sheet.gender') -%>
		      </div>

		      <!-- Size -->
		      <div class="CharacterInformation">    
		          <%= f.text_field :height  -%><br />
				  <%= f.label :height, t('character_sheet.height') -%>
			  </div>
			
			  <!-- master -->
		      <div class="CharacterInformation">    
		          <%= f.text_field :master  -%><br />
				  <%= f.label :master, t('character_sheet.master') -%>
			  </div>
			
			  <!-- Age -->
		      <div class="CharacterInformation">    
		          <%= f.text_field :age  -%><br />
				  <%= f.label :age, t('character_sheet.age') -%>
			  </div>
			
			  <!-- eyes -->
		      <div class="CharacterInformation">    
		          <%= f.text_field :eyes  -%><br />
				  <%= f.label :eyes, t('character_sheet.eyes') -%>
			  </div>
			
			  <!-- hair -->
		      <div class="CharacterInformation">    
		          <%= f.text_field :hair  -%><br />
				  <%= f.label :hair, t('character_sheet.hair') -%>
			  </div>
			
			  <!-- skin -->
		      <div class="CharacterInformation">    
		          <%= f.text_field :skin  -%><br />
				  <%= f.label :skin, t('character_sheet.skin') -%>
			  </div>
			
		</fieldset> <!-- CharacterSheetHeader -->
	
		<!-------------------------------------------------------------------------------->
	    <!--								Characteristics								-->
	    <!-------------------------------------------------------------------------------->
	    <fieldset id="fstCharacteristics">
	    	<%= render 'characteristics', :f => f %>
	    </fieldset>
	
		<!-------------------------------------------------------------------------------->
	    <!--								Hit Points									-->
	    <!-------------------------------------------------------------------------------->
	   <fieldset id="fstHitpoints">
			<table>
			<tr>
				<th></th>
				<th><%= t('character_sheet.totalhp').html_safe %></th>
				<th><%= t('character_sheet.wounds').html_safe %></th>
				<th><%= t('character_sheet.nonelethal').html_safe %></th>
			</tr>
			<tr>
			<td class="label"><%= t('character_sheet.hitpoints').html_safe %></td>
			<td id="total"><%= f.text_field :totalhp  -%></td>
			<td id="wounds"><%= f.text_field :wounds  -%></td>
			<td id="nonelethal"><%= f.text_field :nonelethal  -%></td>
			</tr>
			</table>
	   </fieldset>
		
		<fieldset id="fstSpeed">
			<p><%= t('character_sheet.speed').html_safe %></p>
			<%= f.text_field :speed  -%>
		</fieldset>
		
		<!-------------------------------------------------------------------------------->
	    <!--								Armor Class									-->
	    <!-------------------------------------------------------------------------------->
	   <fieldset id="fstArmorClass">
			<table>			
			<tr>
			<td class="label"><%= t('character_sheet.armorclass').html_safe %></td>
			<td class="modifier"><%=raw @character_sheet.total_armorclass  -%></td>
			<td id="armorbonus">= 10 + <%= f.text_field :armorbonus  -%> + </td>
			<td id="shieldbonus"><%= f.text_field :shieldbonus  -%> + </td>
			<td class="modifier" id="dextmodifier"><%= @character_sheet.dexterity_bonus -%></td>
			<td id="sizemodifier"> + <%= f.text_field :sizemodifier  -%> + </td>
			<td id="naturalarmor"><%= f.text_field :naturalarmor  -%> + </td>
			<td id="deflectionmodifier"><%= f.text_field :deflectionmodifier  -%> + </td>
			<td id="miscmodifier"><%= f.text_field :miscmodifier  -%></td>
			</tr>
			<tr>
				<th></th>
				<th><%= f.label :totalac, t('character_sheet.totalac').html_safe -%></th>
				<th><%= f.label :armorbonus, t('character_sheet.armorbonus').html_safe -%></th>
				<th><%= f.label :shieldbonus, t('character_sheet.shieldbonus').html_safe -%></th>
				<th><%= t('character_sheet.dextmodifier').html_safe -%></th>
				<th><%= f.label :sizemodifier, t('character_sheet.sizemodifier').html_safe -%></th>
				<th><%= f.label :naturalarmor, t('character_sheet.naturalarmor').html_safe -%></th>				
				<th><%= f.label :deflectionmodifier, t('character_sheet.deflectionmodifier').html_safe -%></th>			
				<th><%= f.label :miscmodifier, t('character_sheet.miscmodifier').html_safe -%></th>				
			</tr>
			</table>
			
			<div id="tac">
				<span class="label"><%= t('character_sheet.touchac').html_safe -%></span>
				<%= f.text_field :touchac  -%> 
			</div>

			<div id="ffac">
				<span class="label"><%= t('character_sheet.flatfootedac').html_safe -%></span>
				<%= f.text_field :flatfootedac  -%> 
			</div>
				
	   </fieldset>

		<!-------------------------------------------------------------------------------->
	    <!--								Initiative									-->
	    <!-------------------------------------------------------------------------------->	
		<fieldset id="fstInitiative"> 
			<table>
			<tr>
				<td><span class="label"><%= t('character_sheet.initiative').html_safe -%></span></td>
				<td><%= f.text_field :totalinit  -%> = </td>
				<td class="modifier"><%= @character_sheet.dexterity_bonus -%></td>
				<td> + 	<%= f.text_field :miscinit -%></td>
			</tr>
			<tr>
				<th></th>
				<th><%= t('character_sheet.totalinit').html_safe %></th>
				<th><%= t('character_sheet.dextmodifier').html_safe %></th>
				<th><%= t('character_sheet.miscinit').html_safe %></th>
			</tr>
			</table>
		</fieldset>
		
		<!-------------------------------------------------------------------------------->
	    <!--									Skills									-->
	    <!-------------------------------------------------------------------------------->
		
		<fieldset id="skills">
			<table>
				<tr id="skillheader"><td colspan="7">skills</td></tr>
				<tr>
					<td id="skillclass"></td>
					<td id="skillname"><%= t('character_sheet.skillname').html_safe %></td>
					<td id="skillkeyability"><%= t('character_sheet.skillkeyability').html_safe %></td>
					<td id="skillmodifier"><%= t('character_sheet.skillmodifier').html_safe %></td>
					<td id="skillabilitymodifier"><%= t('character_sheet.skillabilitymodifier').html_safe %></td>
					<td id="skillranks"><%= t('character_sheet.skillranks').html_safe %></td>
					<td id="skillmisc"><%= t('character_sheet.skillmisc').html_safe %></td>
				</tr>
				
				<%= render @skills, :f => f %>
				
			</table>
		</fieldset>
		
	</div> <!-- Sheet --> 
<% end %>
